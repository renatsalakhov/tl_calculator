(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c77785a"],{"073e":function(t,s,i){"use strict";i("6979")},6979:function(t,s,i){},c20c:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"page"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title"},[t._v("Расчет стоимости грузоперевозки")]),s("div",{staticClass:"section"},[s("div",{staticClass:"form"},[s("div",{staticClass:"form__block form__block_inputs"},[s("div",{staticClass:"form__item"},[s("label",{staticClass:"form__label",attrs:{for:"fromCity"}},[t._v("Откуда"),s("span",[t._v(t._s(t.form.from?": "+t.form.from:""))])]),s("Search",{staticClass:"form__search",attrs:{list:t.cities,placeholder:"Из города",selectItem:s=>t.form.from=s}})],1),s("div",{staticClass:"form__item"},[s("label",{staticClass:"form__label",attrs:{for:"toCity"}},[t._v("Куда"),s("span",[t._v(t._s(t.form.to?": "+t.form.to:""))])]),s("Search",{staticClass:"form__search",attrs:{list:t.cities,placeholder:"В город",selectItem:s=>t.form.to=s}})],1)]),s("div",{staticClass:"form__block"},[s("p",{staticClass:"form__label"},[t._v("Вид автотранспорта")]),s("div",{staticClass:"form__types"},[s("div",t._l(t.types[0],(function(i){return s("div",{staticClass:"radio",class:{radio_checked:t.form.type===i.key},on:{click:()=>t.form.type=i.key}},[s("span",{staticClass:"radio__box"}),s("span",{staticClass:"radio__text"},[t._v(t._s(i.text)+" ("+t._s(i.desc)+")")])])})),0),s("div",t._l(t.types[1],(function(i){return s("div",{staticClass:"radio",class:{radio_checked:t.form.type===i.key},on:{click:()=>t.form.type=i.key}},[s("span",{staticClass:"radio__box"}),s("span",{staticClass:"radio__text"},[t._v(t._s(i.text)+" ("+t._s(i.desc)+")")])])})),0)])]),s("div",{staticClass:"form__block"},[s("button",{staticClass:"form__button",class:{form__button_passive:!t.form.from||!t.form.to||!t.form.type||t.form.from===t.form.to||t.isCalculating||t.isCityExcluded},on:{click:function(s){return t.getInfo()}}},[t._v(t._s(t.isCalculating?"Идет расчет...":t.isCityExcluded?"Невозможно рассчитать":"Рассчитать"))])]),t.isCityExcluded?s("p",{staticClass:"form__status"},[t._v("Данное направление считать в АТИ")]):t._e()])]),t.results.length>0?s("div",{staticClass:"section"},[s("p",{staticClass:"section__title section__title_center"},[t._v("Результат расчетов")]),s("div",{staticClass:"results"},[s("div",{staticClass:"results__cities"},[t._v(t._s(t.result.from)),s("span",[s("fa-icon",{attrs:{icon:"arrow-right"}})],1),t._v(t._s(t.result.to)+" ("+t._s(t.result.distance)+"км)")])]),s("div",{staticClass:"table"},[t._l(t.results,(function(i){return[s("div",{staticClass:"table__title"},[t._v(t._s(i.title))]),s("div",{staticClass:"table__value"},[t._v(t._s(i.value))])]}))],2)]):t._e()])])},a=[];i("0643"),i("2382");const l=()=>i.e("chunk-b6c58604").then(i.bind(null,"c106"));var r={components:{Search:l},data:()=>({isCalculating:!1,form:{from:"",to:"",type:""},result:{}}),computed:{types(){return this.$store.state.table.types},cities(){return this.$store.state.table.cities},excludedCities(){return this.$store.state.table.excludedCities},isCityExcluded(){return this.excludedCities.includes(this.form.from)||this.excludedCities.includes(this.form.to)},results(){return this.result.distance?[{title:"Вид автотранспорта",value:this.types.flat().filter(t=>t.key===this.result.type)[0].text},{title:"Ставка за км",value:this.result.m+" руб./км"},{title:"Ставка перевозчика",value:this.result.p+" руб."},{title:"Ставка для клиента",value:this.result.k+" руб."},{title:"Маржа",value:this.result.k-this.result.p+" руб."},{title:"Срок доставки",value:Math.ceil(this.result.distance/700)+" дн."}]:[]}},methods:{async getInfo(){this.form.from&&this.form.to&&this.form.type&&this.form.from!==this.form.to?this.isCalculating||(this.isCalculating=!0,this.result=await this.$store.dispatch("getInfo",this.form),this.isCalculating=!1):this.result={}}}},c=r,o=(i("073e"),i("2877")),_=Object(o["a"])(c,e,a,!1,null,"11938acc",null);s["default"]=_.exports}}]);
//# sourceMappingURL=chunk-5c77785a.996bfac7.js.map