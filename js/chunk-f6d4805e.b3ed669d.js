(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6d4805e"],{"0481":function(t,e,s){"use strict";var r=s("23e7"),i=s("a2bf"),a=s("7b0b"),c=s("50c4"),n=s("a691"),o=s("65f0");r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=a(this),s=c(e.length),r=o(e,0);return r.length=i(r,e,e,s,0,void 0===t?1:n(t)),r}})},"1c4a":function(t,e,s){},2532:function(t,e,s){"use strict";var r=s("23e7"),i=s("5a34"),a=s("1d80"),c=s("ab13");r({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~String(a(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},4069:function(t,e,s){var r=s("44d2");r("flat")},"5a34":function(t,e,s){var r=s("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},a2bf:function(t,e,s){"use strict";var r=s("e8b5"),i=s("50c4"),a=s("0366"),c=function(t,e,s,n,o,l,u,f){var d,_=o,m=0,v=!!u&&a(u,f,3);while(m<n){if(m in s){if(d=v?v(s[m],m,e):s[m],l>0&&r(d))_=c(t,e,d,i(d.length),_,l-1)-1;else{if(_>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[_]=d}_++}m++}return _};t.exports=c},ab13:function(t,e,s){var r=s("b622"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},c20c:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title"},[t._v("Расчет стоимости грузоперевозки")]),s("div",{staticClass:"section"},[s("div",{staticClass:"form"},[s("div",{staticClass:"form__block form__block_inputs"},[s("div",{staticClass:"form__item"},[s("label",{staticClass:"form__label",attrs:{for:"fromCity"}},[t._v("Откуда"),s("span",[t._v(t._s(t.form.from?": "+t.form.from:""))])]),s("Search",{staticClass:"form__search",attrs:{list:t.cities,placeholder:"Из города",selectItem:function(e){return t.form.from=e}}})],1),s("div",{staticClass:"form__item"},[s("label",{staticClass:"form__label",attrs:{for:"toCity"}},[t._v("Куда"),s("span",[t._v(t._s(t.form.to?": "+t.form.to:""))])]),s("Search",{staticClass:"form__search",attrs:{list:t.cities,placeholder:"В город",selectItem:function(e){return t.form.to=e}}})],1)]),s("div",{staticClass:"form__block"},[s("p",{staticClass:"form__label"},[t._v("Вид автотранспорта")]),s("div",{staticClass:"form__types"},[s("div",t._l(t.types[0],(function(e){return s("div",{staticClass:"radio",class:{radio_checked:t.form.type===e.key},on:{click:function(){return t.form.type=e.key}}},[s("span",{staticClass:"radio__box"}),s("span",{staticClass:"radio__text"},[t._v(t._s(e.text)+" ("+t._s(e.desc)+")")])])})),0),s("div",t._l(t.types[1],(function(e){return s("div",{staticClass:"radio",class:{radio_checked:t.form.type===e.key},on:{click:function(){return t.form.type=e.key}}},[s("span",{staticClass:"radio__box"}),s("span",{staticClass:"radio__text"},[t._v(t._s(e.text)+" ("+t._s(e.desc)+")")])])})),0)])]),s("div",{staticClass:"form__block"},[s("button",{staticClass:"form__button",class:{form__button_passive:!t.form.from||!t.form.to||!t.form.type||t.form.from===t.form.to||t.isCalculating||t.isCityExcluded},on:{click:function(e){return t.getInfo()}}},[t._v(t._s(t.isCalculating?"Идет расчет...":t.isCityExcluded?"Невозможно рассчитать":"Рассчитать"))])]),t.isCityExcluded?s("p",{staticClass:"form__status"},[t._v("Данное направление считать в АТИ")]):t._e()])]),t.results.length>0?s("div",{staticClass:"section"},[s("p",{staticClass:"section__title section__title_center"},[t._v("Результат расчетов")]),s("div",{staticClass:"results"},[s("div",{staticClass:"results__cities"},[t._v(t._s(t.result.from)),s("span",[s("fa-icon",{attrs:{icon:"arrow-right"}})],1),t._v(t._s(t.result.to)+" ("+t._s(t.result.distance)+"км)")])]),s("div",{staticClass:"table"},[t._l(t.results,(function(e){return[s("div",{staticClass:"table__title"},[t._v(t._s(e.title))]),s("div",{staticClass:"table__value"},[t._v(t._s(e.value))])]}))],2)]):t._e()])])},i=[],a=(s("4de4"),s("0481"),s("caad6"),s("4069"),s("d3b7"),s("2532"),s("96cf"),s("1da1")),c=function(){return s.e("chunk-2fbd2846").then(s.bind(null,"c106"))},n={components:{Search:c},data:function(){return{isCalculating:!1,form:{from:"",to:"",type:""},result:{}}},computed:{types:function(){return this.$store.state.table.types},cities:function(){return this.$store.state.table.cities},excludedCities:function(){return this.$store.state.table.excludedCities},isCityExcluded:function(){return this.excludedCities.includes(this.form.from)||this.excludedCities.includes(this.form.to)},results:function(){var t=this;return this.result.distance?[{title:"Вид автотранспорта",value:this.types.flat().filter((function(e){return e.key===t.result.type}))[0].text},{title:"Ставка за км",value:"".concat(this.result.m," руб./км")},{title:"Ставка перевозчика",value:"".concat(this.result.p," руб.")},{title:"Ставка для клиента",value:"".concat(this.result.k," руб.")},{title:"Маржа",value:"".concat(this.result.k-this.result.p," руб.")},{title:"Срок доставки",value:"".concat(Math.ceil(this.result.distance/700)," дн.")}]:[]}},methods:{getInfo:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.form.from&&t.form.to&&t.form.type&&t.form.from!==t.form.to){e.next=3;break}return t.result={},e.abrupt("return");case 3:if(!t.isCalculating){e.next=5;break}return e.abrupt("return");case 5:return t.isCalculating=!0,e.next=8,t.$store.dispatch("getInfo",t.form);case 8:t.result=e.sent,t.isCalculating=!1;case 10:case"end":return e.stop()}}),e)})))()}}},o=n,l=(s("c7bf"),s("2877")),u=Object(l["a"])(o,r,i,!1,null,"11938acc",null);e["default"]=u.exports},c7bf:function(t,e,s){"use strict";s("1c4a")},caad6:function(t,e,s){"use strict";var r=s("23e7"),i=s("4d64").includes,a=s("44d2"),c=s("ae40"),n=c("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!n},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);
//# sourceMappingURL=chunk-f6d4805e.b3ed669d.js.map