(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-446b5944"],{2532:function(t,s,e){"use strict";var r=e("23e7"),i=e("5a34"),a=e("1d80"),n=e("ab13");r({target:"String",proto:!0,forced:!n("includes")},{includes:function(t){return!!~String(a(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,s,e){var r=e("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},6262:function(t,s,e){"use strict";e("f402")},ab13:function(t,s,e){var r=e("b622"),i=r("match");t.exports=function(t){var s=/./;try{"/./"[t](s)}catch(e){try{return s[i]=!1,"/./"[t](s)}catch(r){}}return!1}},c20c:function(t,s,e){"use strict";e.r(s);var r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[t._v("Расчет стоимости грузоперевозки")]),e("div",{staticClass:"section"},[e("div",{staticClass:"form"},[e("div",{staticClass:"form__block form__block_inputs"},[e("div",{staticClass:"form__item"},[e("label",{staticClass:"form__label",attrs:{for:"fromCity"}},[t._v("Откуда"),e("span",[t._v(t._s(t.form.from?": "+t.form.from:""))])]),e("Search",{staticClass:"form__search",attrs:{list:t.cities,placeholder:"Из города",selectItem:function(s){return t.form.from=s}}})],1),e("div",{staticClass:"form__item"},[e("label",{staticClass:"form__label",attrs:{for:"toCity"}},[t._v("Куда"),e("span",[t._v(t._s(t.form.to?": "+t.form.to:""))])]),e("Search",{staticClass:"form__search",attrs:{list:t.cities,placeholder:"В город",selectItem:function(s){return t.form.to=s}}})],1)]),e("div",{staticClass:"form__block"},[e("p",{staticClass:"form__label"},[t._v("Вид автотранспорта")]),e("div",{staticClass:"form__types"},t._l(t.types,(function(s){return e("div",{staticClass:"radio",class:{radio_checked:t.form.type===s.key},on:{click:function(){return t.form.type=s.key}}},[e("span",{staticClass:"radio__box"}),e("span",{staticClass:"radio__text"},[t._v(t._s(s.text))])])})),0)]),e("div",{staticClass:"form__block"},[e("button",{staticClass:"form__button",class:{form__button_passive:!t.form.from||!t.form.to||!t.form.type||t.form.from===t.form.to||t.isCalculating||t.isCityExcluded},on:{click:function(s){return t.getInfo()}}},[t._v(t._s(t.isCalculating?"Идет расчет...":t.isCityExcluded?"Невозможно рассчитать":"Рассчитать"))])]),t.isCityExcluded?e("p",{staticClass:"form__status"},[t._v("Данное направление считать в АТИ")]):t._e()])]),t.results.length>0?e("div",{staticClass:"section"},[e("p",{staticClass:"section__title section__title_center"},[t._v("Результат расчетов")]),e("div",{staticClass:"results"},[e("div",{staticClass:"results__cities"},[t._v(t._s(t.result.from)),e("span",[e("fa-icon",{attrs:{icon:"arrow-right"}})],1),t._v(t._s(t.result.to)+" ("+t._s(t.result.distance)+"км)")])]),e("div",{staticClass:"table"},[t._l(t.results,(function(s){return[e("div",{staticClass:"table__title"},[t._v(t._s(s.title))]),e("div",{staticClass:"table__value"},[t._v(t._s(s.value))])]}))],2)]):t._e()])])},i=[],a=(e("4de4"),e("caad6"),e("d3b7"),e("2532"),e("96cf"),e("1da1")),n=function(){return e.e("chunk-2fbd2846").then(e.bind(null,"c106"))},c={name:"TransportationCost",components:{Search:n},data:function(){return{isCalculating:!1,form:{from:"",to:"",type:""},result:{}}},computed:{types:function(){return this.$store.state.table.types},cities:function(){return this.$store.state.table.cities},excludedCities:function(){return this.$store.state.table.excludedCities},isCityExcluded:function(){return this.excludedCities.includes(this.form.from)||this.excludedCities.includes(this.form.to)},results:function(){var t=this;return this.result.distance?[{title:"Вид автотранспорта",value:this.types.filter((function(s){return s.key===t.result.type}))[0].text},{title:"Ставка за км",value:"".concat(this.result.m," руб./км")},{title:"Ставка перевозчика",value:"".concat(this.result.p," руб.")},{title:"Ставка для клиента",value:"".concat(this.result.k," руб.")},{title:"Маржа",value:"".concat(this.result.k-this.result.p," руб.")},{title:"Срок доставки",value:"".concat(Math.ceil(this.result.distance/700)," дн.")}]:[]}},methods:{getInfo:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.form.from&&t.form.to&&t.form.type&&t.form.from!==t.form.to){s.next=3;break}return t.result={},s.abrupt("return");case 3:if(!t.isCalculating){s.next=5;break}return s.abrupt("return");case 5:return t.isCalculating=!0,s.next=8,t.$store.dispatch("getInfo",t.form);case 8:t.result=s.sent,t.isCalculating=!1;case 10:case"end":return s.stop()}}),s)})))()}}},o=c,l=(e("6262"),e("2877")),u=Object(l["a"])(o,r,i,!1,null,"9094f892",null);s["default"]=u.exports},caad6:function(t,s,e){"use strict";var r=e("23e7"),i=e("4d64").includes,a=e("44d2"),n=e("ae40"),c=n("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!c},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},f402:function(t,s,e){}}]);
//# sourceMappingURL=chunk-446b5944.9d7c9d96.js.map